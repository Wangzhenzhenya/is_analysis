##  **预约图书用例** 

| 用例名称 | 借出图书                       |
| :------- | ------------------------------ |
| 参与者   | 读者                           |
| 前置条件 | 读者具有预约权限               |
| 后置条件 | 更新图书状态，更新可借图书数量 |

主事件流

| 参与者动作                                                   | 系统行为                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1.读者登入系统； <br />3.读者查询图书状态； <br />5.读者申请预约图书 | 2.系统验证读者身份和借书条件； <br />4.系统返回该图书状态；<br />6.系统更改图书状态，并更新可预约书数量。 |

| 备选事件流                                                   |
| ------------------------------------------------------------ |
| 2a.读者身份和借书条件不符合<br />①系统提示读者身份和借书条件不符合，用例结束<br />4a.系统返回图书状态<br />①若图书不可借，提示用户该书不可预约<br />6a.更新用户可借书数量<br />①若预约书数量超标，则提示不可预约<br />②若未超，则累加读者的预约书数量 |

| 业务规则                                                     |
| ------------------------------------------------------------ |
| 1.一个读者在可借数量内可预约多本书<br />2.图书状态为不可借的书，不可预约<br />3.超出借书数量下，读者归还书后，可预约新书 |

**“预约图书”用例流程图源码如下：**

```
@startuml
(*) -->读者登入系统
if "系统验证读者身份" then
-->[true]"读者查询图书状态"
-->"系统返回该图书状态"
-->"读者申请预约图书"
if "系统验证读者借书数量是否超标" then

if "图书不可借" then
-->[true]"提示用户该书不可预约"
-->(*)
else
if "预约人数超标" then
-->[true]"提示预约人数超标不可预约"
-->(*)
else
-->[false]"累加预约读者的数量"
-->" 系统更改图书状态，更新可预约书数量"
-->"更新用户可借(预约)书的的数量"
-->(*)
endif
endif
else
-->[false]"借书数量超标"
-->"还书"
-->"读者申请预约图书"
endif

else
-->[false]"系统提示读者身份和借书条件不符合"
-->(*)


endif
@enduml

```

![progress](./img/reserve.png)